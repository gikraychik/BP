(function(j,e,f){const b="night";const l="#"+b;var q;var c;var o;var r;var s;var p=true;var g=true;elementsCallbackStack.addPageCb(n);function n(){if(!(e("body").attr("id")==b)){return}if(typeof q=="undefined"){q=new PopupWindow("#register-form-popup","#register-button",l);q.init()}if(typeof c=="undefined"){c=new Form("#register-form");c.afterSubmitFunctions.push(q.close.bind(q));q.functionsOnShow.push(function(){c.$resultContainer.fadeOut(10)});q.functionsOnHide.push(function(){c.$resultContainer.fadeOut()})}else{c.reinit()}c.initDateFields();if(typeof o=="undefined"){o=new PopupWindow("#teams-popup","#teams-open-button",l);o.init();o.functionsOnHide.push(function(){o.$popup.find("#fake-close").trigger("click")})}if(typeof r=="undefined"){r=new PopupWindow("#calendar-popup","#calendar-open-button",l);r.init()}if(typeof s=="undefined"){s=new PopupWindow("#archive-popup","#archive-open-button",l);s.init()}e(".teams-list .team").each(function(u){var v=e(this);var t=e("#team-descr"+(u+1));v.on("click",function(){e(".teams-list").fadeOut(100,function(){t.fadeIn(200);e("#fake-close").fadeIn(100)})})});e("#fake-close").on("click",function(){e(".team-descr").fadeOut(100,function(){e(".teams-list").delay(100).fadeIn(200)});e(this).fadeOut(100)});e("#calendar").on("click",".navigation a",function(t){t.preventDefault();stopPageLoader();e("#calendar").find("table").wait();p=false});h();m();i();if(!g_loadedOnce){setContentInVerticalMiddle()}}elementsCallbackStack.addOnPjaxReplaceCb(function(){if(!(e("body").attr("id")==b)){return}var t=(PAGE_ANIMATION=="move");setContentInVerticalMiddle(t)});elementsCallbackStack.addFormCb(d);function d(){if(!(e("body").attr("id")==b)){return}c.afterSubmit();h();m();e("#calendar").find("table").unwait();p=true}elementsCallbackStack.addBeforePjaxSendCb(function(){if(!(e("body").attr("id")==b)){return}startPageLoader(PAGE_LOADER_FIRST_RGBA);startPageLoaderTimer(PAGE_LOADER_SECOND_RGBA,PAGE_LOADER_DELAY)});function h(){e(".hasTooltip").each(function(){e(this).qtip({content:{text:e(this).next("div").html()},style:{classes:"qtip-bootstrap qtip-shadow text qtip-night-page"},position:{my:"top left",at:"bottom center",adjust:{method:"shift shift"},viewport:e(document)}})});var t={my:"right center",at:"left center"};if(Modernizr.mq("(max-width: 1250px)")){t={my:"bottom center",at:"top center"}}e(".round-night-button").each(function(){e(this).qtip({content:{text:e(this).next("div").html()},style:{classes:"qtip-bootstrap qtip-shadow text"},position:{my:t.my,at:t.at,adjust:{method:"shift shift"},viewport:e(document)}})})}function m(){e(".tournament-date").on("click",function(){var t=e(this).find("a").next(".hidden").find("#date").html();c.$form.find("#date-field").val(t);r.close();q.open()})}function i(){e(".archive").find(".teams-list").each(function(){e(this).find("li").each(function(){e(this).on("click",function(u){var t=a(e(this).html());s.close();o.open();t.trigger("click")})})})}function a(t){var v=e(".team").toArray();for(var u=v.length-1;u>=0;u--){if(e(v[u]).find("#name").html()==t){return e(v[u])}}}elementsCallbackStack.addOnResizeCb(k);function k(){if(!(e("body").attr("id")==b)){return}setContentInVerticalMiddle()}}(window.nightPage=window.nightPage||{},jQuery));